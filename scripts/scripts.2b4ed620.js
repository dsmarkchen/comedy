"use strict";angular.module("comedyApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).service("ivService",["$http",function(e){this._modifier=[.094,.135137432,.16639787,.192650919,.21573247,.236572661,.25572005,.273530381,.29024988,.306057378,.3210876,.335445036,.34921268,.362457751,.3752356,.387592416,.39956728,.411193551,.4225,.432926409,.44310755,.453059959,.4627984,.472336093,.48168495,.4908558,.49985844,.508701765,.51739395,.525942511,.5343543,.542635738,.5507927,.558830586,.5667545,.574569133,.5822789,.589887907,.5974,.604823665,.6121573,.619404122,.6265671,.633649143,.64065295,.647580967,.65443563,.661219252,.667934,.674581896,.6811649,.687684904,.69414365,.70054287,.7068842,.713169109,.7193991,.725575614,.7317,.734741009,.7377695,.740785594,.74378943,.746781211,.74976104,.752729087,.7556855,.758630368,.76156384,.764486065,.76739717,.770297266,.7731865,.776064962,.77893275,.781790055,.784637,.787473608,.7903,.792803968,.79530001,.797800015,.8003,.802799995,.8053,.8078,.81029999,.812799985,.81529999,.81779999,.82029999,.82279999,.82529999,.82779999,.83029999,.83279999,.83529999,.83779999,.84029999,.84279999,.84529999],this.getCpm=function(t){return this._modifier[2*(t-1)]},this.calculateCP=function(t,e,i){var o=this.getCpm(t);e.Atk,i.Atk,e.Def,i.Def,e.Hp,i.Hp;return Math.floor((e.Atk+i.Atk)*Math.pow(e.Def+i.Def,.5)*Math.pow(e.Hp+i.Hp,.5)*Math.pow(o,2)/10)},this.getStat=function(t){e.get("/stats.txt").then(function(t){var e=t.split(/\r?\n/);console.log("getTeam "+e)})}}]).directive("xwindow",["$window",function(n){return{link:function(t,e,i){function o(){console.log(n.innerWidth),t.width!==n.innerWidth&&(t.width=n.innerWidth,t.$digest()),t.height!==n.innerHeight&&(t.height=n.innerHeight,t.$digest())}t.width=n.innerWidth,t.height=n.innerHeight,angular.element(n).on("resize",o),t.$on("$destroy",function(){angular.element(n).off("resize",o)})},restrict:"A"}}]).directive("tooltip",["$compile","$sce",function(n,a){return{restrict:"A",scope:{content:"=tooltipContent"},link:function(e,t,i){e.displayTooltip=!1,e.updateTooltipOpacity=function(t){o.css({opacity:t,"max-width":340})},e.updateTooltipPosition=function(t,e){$(this);o.css({top:t+"px",left:e+"px"})},e.getSafeContent=function(t){return a.trustAsHtml(t)};var o=angular.element('<div ng-show="displayTooltip" id="tooltip">        \t<span ng-bind-html="getSafeContent(content)"></span>        </div>');angular.element('<div ng-show="displayTooltip" class="tooltip">        \t<span ng-bind-html="getSafeContent(content)"></span>        </div>');angular.element(document.querySelector("body")).append(o),t.on("mouseenter",function(t){e.displayTooltip=!0,e.$digest()}),t.on("mousemove",function(t){e.updateTooltipOpacity(.9),e.updateTooltipPosition(t.clientY-20,t.clientX+5)}),t.on("mouseleave",function(){e.displayTooltip=!1,e.$digest()}),n(o)(e)}}}]).directive("xtooltip",function(){return{restrict:"A",link:function(t,e,i){e.hover(function(){e.tooltip({html:"true",container:"body"}),e.tooltip("show")},function(){e.tooltip("hide")})}}}).directive("bs-tooltip",function(){return function(t,e,i){i.$observe("title",function(t){e.tooltip("destroy"),jQuery.trim(t)&&e.tooltip()}),e.on("$destroy",function(){e.tooltip("destroy"),delete i.$$observers.title})}}).directive("owlCarousel",function(){return{restrict:"E",transclude:!1,link:function(n){n.initCarousel=function(t){var e={},i=n.$eval($(t).attr("data-options"));for(var o in i)e[o]=i[o];$(t).owlCarousel(e)}}}}).directive("owlCarouselItem",function(){return{restrict:"A",transclude:!1,link:function(t,e){t.$last&&t.initCarousel(e.parent())}}}).config(["$routeProvider",function(t,e){t.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/comedy/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/main",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/comedy/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/canto",{templateUrl:"views/canto.html",controller:"CantoCtrl",controllerAs:"canto"}).otherwise({redirectTo:"/"})}]),angular.module("comedyApp").filter("split",function(){return function(t){var e=t.split(/([!,.;?-])/g),i="",o="",n="";return e.forEach(function(t){if(i+=t,52<t.length){return i.split(/(that|where|which|when|who)/g).forEach(a),o+=n,void(i="")}((o+=t).endsWith("--")&&"-"==t||"?"==t||";"==t||"."==t||"!"==t||","==t)&&(o+="\n",i="")}),console.log("line_index:0"),o;function a(t){if("that"==t||"where"==t||"when"==t||"who"==t||"which"==t)return n+="\n ",void(n+=t);n+=t}}}).controller("MainCtrl",["$window","$scope","$location",function(t,e,i){var o,n;this.test="testing mainController",e.txTotalSymbols=localStorage.getItem("totalSymbols"),e.txTotalLHs=localStorage.getItem("totalLHs"),e.rxTotalSymbols=localStorage.getItem("rxTotalSymbols"),e.rxTotalLHs=localStorage.getItem("rxTotalLHs"),e.isActive=function(t){return t===i.path()},e.ie=(o=window.navigator.userAgent,0<(n=o.indexOf("MSIE"))?parseInt(o.substring(n+5,o.indexOf(".",n))):navigator.userAgent.match(/Trident\/7\./)?11:0)}]),angular.module("comedyApp").controller("CantoCtrl",["$scope","$http","fileReader",function(r,e,t){r.myQuery="1:1,25",r.opt=localStorage.getItem("myCantoOpt"),null==r.opt&&(r.opt="inferno",localStorage.setItem("myCantoOpt",r.opt)),r.items2=[{name:"Inferno",text:"the misery of the spirit bound to the prides and actions of the flash"},{name:"Purgatorio",text:"the process of transmuting fleshly into spiritual experience"},{name:"Paradiso",text:"the degrees of spiritual realization"}],r.lines=[];var n=[],a=0;r.buildone=function(t,e){var i=" ";if(e&&(i="<br>"),0<t.trim().length){if(/^##/.test(t))return 0<n.length&&(r.lines.push({name:name,line:a,text:n.join(i),visible:!0}),n=[]),name=t.replace(/^## /,""),void(a=0);var o=t.replace(/--/g,"&#x2012;");n.push(o.trim()),a++,3==n.length&&(r.lines.push({name:name,line:a-2,text:n.join(i),visible:!0}),n=[])}},r.feed=function(){var t="https://dsmarkchen.github.io/comedy/data/"+r.opt+".txt";e.get(t).then(function(t){for(var e=t.data.split(/\r?\n/),i=0;i<e.length;i++)r.buildone(e[i],!0);0<e.length&&r.lines.push({line:a-1,text:e.join("<br>")})})},r.feed();var s=3;r.move=function(){var t=r.myQuery;if(""!=t){var e=t.split(/[,:]/),i=e[0].trim(),o=parseInt(e[1].trim(),10),n=parseInt(e[2].trim(),10),a=n-o;if(0<s){n=n+a+1;var l=(o=o+a+1)%3;0==l&&(o+=1,n+=1),2==l&&(o-=1,n-=1)}s<0&&(o=o-a-1,n=n-a-1,0==l&&(o+=1,n+=1),2==l&&(o-=1,n-=1)),o<0&&(o=1),r.myQuery=i+":"+o.toString()+","+n.toString(),localStorage.setItem("myQuery",r.myQuery)}},r.prev=function(){s=-3,r.move()},r.next=function(){s=3,r.move()},r.change=function(){localStorage.setItem("myCantoOpt",r.opt)}}]).filter("myCantoFilter",function(){return function(t,e){var i=[];if(""==e)return t;var o=e.split(/[,:]/),n=o[0],a=o[1],l=o[2];return angular.forEach(t,function(t){null!=t.name&&t.name.trim()==n.trim()&&t.line>=a&&t.line<l&&i.push(t)}),i}}),angular.module("comedyApp").controller("AboutCtrl",["$scope","ivService","fileReader",function(l,r,t){l.items2=[{name:"Inferno",text:"the misery of the spirit bound to the prides and actions of the flash"},{name:"Purgatorio",text:"the process of transmuting fleshly into spiritual experience"},{name:"Paradiso",text:"the degrees of spiritual realization"}],l.users=["joseph","james","joseph 22 ","joseph"],l.comments=["comment 1","comment2","",""],l.isNullOrEmpty=function(t){return null==t||""===t},l.calcCP=function(){var t=l.name,e=l.attack,i=l.defense,o=l.hp,n=(r.getStat(t),parseInt(l.level)),a={Atk:parseInt(e),Def:parseInt(i),Hp:parseInt(o)};l.cp=r.calculateCP(n,a,{Atk:112,Def:152,Hp:225})}}]).factory("fileReader",["$q","$log",function(o,t){t.log("fileReader");return{readAsText:function(t,e){var i=o.defer();return function(t,e){var i=new FileReader;return i.onload=function(t,e,i){return function(){i.$apply(function(){e.resolve(t.result)})}}(i,t,e),i.onerror=function(t,e,i){return function(){i.$apply(function(){e.reject(t.result)})}}(i,t,e),i.onprogress=function(t,e){return function(t){e.$broadcast("fileProgress",{total:t.total,loaded:t.loaded})}}(0,e),i}(i,e).readAsText(t),i.promise}}}]),angular.module("comedyApp").run(["$templateCache",function(t){t.put("views/about.html",'<section id="about"> <div class="container"> <div class="row"> <div class="col-md-12"> <data-owl-carousel class="about-carousel owl-carousel" data-options="{navigation: false, pagination: true, singleItem: true, rewindNav : false}"> <div owl-carousel-item="" ng-repeat="item in ::items2 track by $index" class="owl-item"> <div> <div class="user"> <img src="images/item-img2.1626849d.jpg" alt="People"> <h2>{{item.name}}</h2> </div> <p>{{item.text}}</p> </div> </div> </data-owl-carousel> </div> </div> </div> </section> <section id="testimonial"> <div class="container"> <div class="row"> <div class="col-md-6"> <div class="block"> <ul class="counter-box clearfix"> <li> <div class="block"> <i class="ion-ios-chatboxes-outline"></i> <h4 class="counter">70</h4> <span>Life Span</span> </div> </li> <ul class="counter-box clearfix"> <li> <div class="block"> <i class="ion-ios-glasses-outline"></i> <h4 class="counter">3</h4> <span>Root to source</span> </div> </li> <ul class="counter-box clearfix"> <li> <div class="block"> <i class="ion-ios-compose-outline"></i> <h4 class="counter">1321</h4> <span>Death</span> </div> </li> <ul class="counter-box clearfix"> <li> <div class="block"> <i class="ion-ios-timer-outline"></i> <h4 class="counter">1265</h4> <span>Born</span> </div> </li> </ul> </ul> </ul> </ul> </div> </div> <div class="col-md-6"> <data-owl-carousel class="testimonial-carousel" data-options="{navigation: false, pagination: true, singleItem: true, autoHeight: true, rewindNav : false}"> <div owl-carousel-item="" ng-repeat="item in ::users track by $index" class="block"> <div> <img src="images/cotation.63867ed8.png" alt="IMG"> <div class="user"> <img src="images/item-img1.d4dca676.jpg" alt="People"> <p>This company created an e-commerce site with the tools to make our business a success, with innovative ideas. We feel that our site has unique elements that make us stand out from the crowd.</p> <p><span>{{::item}}</span></p> </div> </div> </div> </data-owl-carousel> </div> </div> </div> </section> '),t.put("views/canto.html",'<section id="canto"> <div class="container"> <div class="row"> <div class="col-md-3"> <div class="form-check form-check-inline"> <input class="form-check-input" type="radio" ng-model="opt" value="inferno" ng-change="change()"> <label class="form-check-label">inferno</label> </div> <div class="form-check form-check-inline"> <input class="form-check-input" type="radio" ng-model="opt" value="purgatorio" ng-change="change()"> <label class="form-check-label">purgatorio</label> </div> <div class="form-check form-check-inline"> <input class="form-check-input" type="radio" ng-model="opt" value="paradiso" ng-change="change()"> <label class="form-check-label">paradiso</label> </div> </div> <div class="canto-outline col-md-6"> <div class="" ng-repeat="canto in lines | myCantoFilter: myQuery  track by $index "> <div class="row" ng-if="canto.visible"> <div class="col-1" style="margin:0px 0px 0px 0px;padding:0px 0px; border: 1px solid #f8f9fa;"> <p class="line" style="margin:0px 0px 0px 0px;padding:0px 0px;background-color:#f8f9fa;">{{canto.name}}:{{canto.line}} </p> </div> <div class="col-11" style="padding-left:1px;padding-right:1px"> <p class="canto" ng-bind-html="canto.text"></p> </div> </div> </div> </div> <div class="col-md-3"> <form> <div class="form-group row"> <div class="input-group-addon col-sm-1"><i class="fa fa-search"></i></div> <input type="text" class="form-control col-sm-9 offset-sm-1" placeholder="query: start, end" ng-model="myQuery"> </div> </form> <div class="row"> <button class="btn btn-secondary col-sm-3 offset-sm-1" ng-click="prev()"> prev</button> <button class="btn btn-secondary col-sm-3 offset-sm-1" ng-click="next()"> next</button> </div> </div> </div> </div> </section> '),t.put("views/main.html",'<div class="jumbotron jumbotron-fluid"> <div class="container"> <div class="block"> <h1 class="animated fadeInUp">Divine Comedy</h1> <p class="animated fadeInUp">Inferno, Purgatorio, Paradiso</p> <div ng-hide="ie == 0"> <p class="animated fadeInUp">IE {{ie}}</p> </div> </div> </div> </div> <div class="container"> <p> <strong> Summary </strong> </p> <table class="table table-striped"> <tr> <th> </th> <th> Tx</th> <th> Rx</th> <th> Percentage</th> </tr> <tr> <td> symbols </td> <td>{{txTotalSymbols}} </td> <td>{{rxTotalSymbols}} </td> <td>{{rxTotalSymbols /txTotalSymbols * 100 | number : 2}} </td> </tr> <tr><td> sequences </td> <td> {{txTotalLHs}} </td> <td> {{rxTotalLHs}} </td> <td> {{rxTotalLHs/txTotalLHs * 100 | number : 2}} </td> </tr> </table> <div xwindow> <p ng-if="width > 320">The device window is: [{{width}}, {{height}}].</p> </div> </div> ')}]);