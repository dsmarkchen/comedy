"use strict";angular.module("comedyApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).service("ivService",["$http",function(e){this._modifier=[.094,.135137432,.16639787,.192650919,.21573247,.236572661,.25572005,.273530381,.29024988,.306057378,.3210876,.335445036,.34921268,.362457751,.3752356,.387592416,.39956728,.411193551,.4225,.432926409,.44310755,.453059959,.4627984,.472336093,.48168495,.4908558,.49985844,.508701765,.51739395,.525942511,.5343543,.542635738,.5507927,.558830586,.5667545,.574569133,.5822789,.589887907,.5974,.604823665,.6121573,.619404122,.6265671,.633649143,.64065295,.647580967,.65443563,.661219252,.667934,.674581896,.6811649,.687684904,.69414365,.70054287,.7068842,.713169109,.7193991,.725575614,.7317,.734741009,.7377695,.740785594,.74378943,.746781211,.74976104,.752729087,.7556855,.758630368,.76156384,.764486065,.76739717,.770297266,.7731865,.776064962,.77893275,.781790055,.784637,.787473608,.7903,.792803968,.79530001,.797800015,.8003,.802799995,.8053,.8078,.81029999,.812799985,.81529999,.81779999,.82029999,.82279999,.82529999,.82779999,.83029999,.83279999,.83529999,.83779999,.84029999,.84279999,.84529999],this.getCpm=function(t){return this._modifier[2*(t-1)]},this.calculateCP=function(t,e,o){var n=this.getCpm(t);e.Atk,o.Atk,e.Def,o.Def,e.Hp,o.Hp;return Math.floor((e.Atk+o.Atk)*Math.pow(e.Def+o.Def,.5)*Math.pow(e.Hp+o.Hp,.5)*Math.pow(n,2)/10)},this.getStat=function(t){e.get("/stats.txt").then(function(t){var e=t.split(/\r?\n/);console.log("getTeam "+e)})}}]).directive("xwindow",["$window",function(i){return{link:function(t,e,o){function n(){console.log(i.innerWidth),t.width!==i.innerWidth&&(t.width=i.innerWidth,t.$digest()),t.height!==i.innerHeight&&(t.height=i.innerHeight,t.$digest())}t.width=i.innerWidth,t.height=i.innerHeight,angular.element(i).on("resize",n),t.$on("$destroy",function(){angular.element(i).off("resize",n)})},restrict:"A"}}]).directive("countUp",["$compile",function(i,t){return{restrict:"E",replace:!1,scope:{countTo:"=countTo",start:"=start",step:"=step",interval:"=interval"},controller:["$scope","$element","$attrs","$timeout",function(e,t,o,n){e.millis=e.start,0===t.html().trim().length?t.append(i("<span>{{millis}}</span>")(e)):t.append(i(t.contents())(e));!function t(){n(function(){e.millis+=e.step,e.$digest(),e.millis<e.countTo&&t()},e.interval)}()}]}}]).directive("tooltip",["$compile","$sce",function(i,l){return{restrict:"A",scope:{content:"=tooltipContent"},link:function(e,t,o){e.displayTooltip=!1,e.updateTooltipOpacity=function(t){n.css({opacity:t,"max-width":340})},e.updateTooltipPosition=function(t,e){$(this);n.css({top:t+"px",left:e+"px"})},e.getSafeContent=function(t){return l.trustAsHtml(t)};var n=angular.element('<div ng-show="displayTooltip" id="tooltip">        \t<span ng-bind-html="getSafeContent(content)"></span>        </div>');angular.element('<div ng-show="displayTooltip" class="tooltip">        \t<span ng-bind-html="getSafeContent(content)"></span>        </div>');angular.element(document.querySelector("body")).append(n),t.on("mouseenter",function(t){e.displayTooltip=!0,e.$digest()}),t.on("mousemove",function(t){e.updateTooltipOpacity(.9),e.updateTooltipPosition(t.clientY-20,t.clientX+5)}),t.on("mouseleave",function(){e.displayTooltip=!1,e.$digest()}),i(n)(e)}}}]).directive("xtooltip",function(){return{restrict:"A",link:function(t,e,o){e.hover(function(){e.tooltip({html:"true",container:"body"}),e.tooltip("show")},function(){e.tooltip("hide")})}}}).directive("bs-tooltip",function(){return function(t,e,o){o.$observe("title",function(t){e.tooltip("destroy"),jQuery.trim(t)&&e.tooltip()}),e.on("$destroy",function(){e.tooltip("destroy"),delete o.$$observers.title})}}).directive("owlCarousel",function(){return{restrict:"E",transclude:!1,link:function(i){i.initCarousel=function(t){var e={},o=i.$eval($(t).attr("data-options"));for(var n in o)e[n]=o[n];$(t).owlCarousel(e)}}}}).directive("owlCarouselItem",function(){return{restrict:"A",transclude:!1,link:function(t,e){t.$last&&t.initCarousel(e.parent())}}}).config(["$routeProvider",function(t,e){t.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/comedy/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/main",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/comedy/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/comedy/voyage",{templateUrl:"views/voyage.html",controller:"VoyageCtrl",controllerAs:"voyage"}).when("/voyage",{templateUrl:"views/voyage.html",controller:"VoyageCtrl",controllerAs:"voyage"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/canto",{templateUrl:"views/canto.html",controller:"CantoCtrl",controllerAs:"canto"}).otherwise({redirectTo:"/"})}]),angular.module("comedyApp").filter("split",function(){return function(t){var e=t.split(/([!,.;?-])/g),o="",n="",i="";return e.forEach(function(t){if(o+=t,52<t.length){return o.split(/(that|where|which|when|who)/g).forEach(l),n+=i,void(o="")}((n+=t).endsWith("--")&&"-"==t||"?"==t||";"==t||"."==t||"!"==t||","==t)&&(n+="\n",o="")}),console.log("line_index:0"),n;function l(t){if("that"==t||"where"==t||"when"==t||"who"==t||"which"==t)return i+="\n ",void(i+=t);i+=t}}}).controller("MainCtrl",["$window","$scope","$location",function(t,e,o){var n,i;this.test="testing mainController",e.txTotalSymbols=localStorage.getItem("totalSymbols"),e.txTotalLHs=localStorage.getItem("totalLHs"),e.rxTotalSymbols=localStorage.getItem("rxTotalSymbols"),e.rxTotalLHs=localStorage.getItem("rxTotalLHs"),e.isActive=function(t){return t===o.path()},e.ie=(n=window.navigator.userAgent,0<(i=n.indexOf("MSIE"))?parseInt(n.substring(i+5,n.indexOf(".",i))):navigator.userAgent.match(/Trident\/7\./)?11:0)}]),angular.module("comedyApp").controller("CantoCtrl",["$scope","$http","fileReader",function(r,e,t){r.myQuery="1:1,25",r.opt=localStorage.getItem("myCantoOpt"),null==r.opt&&(r.opt="inferno",localStorage.setItem("myCantoOpt",r.opt)),r.items2=[{name:"Inferno",text:"the misery of the spirit bound to the prides and actions of the flash"},{name:"Purgatorio",text:"the process of transmuting fleshly into spiritual experience"},{name:"Paradiso",text:"the degrees of spiritual realization"}],r.lines=[];var i=[],l=0;r.buildone=function(t,e){var o=" ";if(e&&(o="<br>"),0<t.trim().length){if(/^##/.test(t))return 0<i.length&&(r.lines.push({name:name,line:l,text:i.join(o),visible:!0}),i=[]),name=t.replace(/^## /,""),void(l=0);var n=t.replace(/--/g,"&#x2012;");i.push(n.trim()),l++,3==i.length&&(r.lines.push({name:name,line:l-2,text:i.join(o),visible:!0}),i=[])}},r.feed=function(){var t="https://dsmarkchen.github.io/comedy/data/"+r.opt+".txt";e.get(t).then(function(t){for(var e=t.data.split(/\r?\n/),o=0;o<e.length;o++)r.buildone(e[o],!0);0<e.length&&r.lines.push({line:l-1,text:e.join("<br>")})})},r.feed();var s=3;r.move=function(){var t=r.myQuery;if(""!=t){var e=t.split(/[,:]/),o=e[0].trim(),n=parseInt(e[1].trim(),10),i=parseInt(e[2].trim(),10),l=i-n;if(0<s){i=i+l+1;var a=(n=n+l+1)%3;0==a&&(n+=1,i+=1),2==a&&(n-=1,i-=1)}s<0&&(n=n-l-1,i=i-l-1,0==a&&(n+=1,i+=1),2==a&&(n-=1,i-=1)),n<0&&(n=1),r.myQuery=o+":"+n.toString()+","+i.toString(),localStorage.setItem("myQuery",r.myQuery)}},r.prev=function(){s=-3,r.move()},r.next=function(){s=3,r.move()},r.change=function(){localStorage.setItem("myCantoOpt",r.opt)}}]).filter("myCantoFilter",function(){return function(t,e){var o=[];if(""==e)return t;var n=e.split(/[,:]/),i=n[0],l=n[1],a=n[2];return angular.forEach(t,function(t){null!=t.name&&t.name.trim()==i.trim()&&t.line>=l&&t.line<a&&o.push(t)}),o}}),angular.module("comedyApp").controller("VoyageCtrl",["$scope",function(e){e.selectedIndex=-1,e.current=0,e.setCurrent=function(t){e.current=t},e.selectedItem=[],e.items2=[{name:"Francesca",text:"Love, that releases no beloved from loving took hold of me so strongly through his beauty that, as you see, it has not left me yet."},{name:"Purgatorio",text:"the process of transmuting fleshly into spiritual experience"},{name:"Picarda",text:"And in His will there is our peace: that sea to which all beings move—the beings He creates or nature makes—such is His will."}],e.users=["joseph","james","joseph 22 ","joseph"],e.comments=["comment 1","comment2","",""],e.selectItem=function(t){e.selectedItem=e.items2[t],e.selectedIndex=t}}]),angular.module("comedyApp").controller("AboutCtrl",["$scope","ivService","fileReader",function(a,r,t){a.items2=[{name:"Inferno",text:"the misery of the spirit bound to the prides and actions of the flash"},{name:"Purgatorio",text:"the process of transmuting fleshly into spiritual experience"},{name:"Paradiso",text:"the degrees of spiritual realization"}],a.users=["joseph","james","joseph 22 ","joseph"],a.comments=["comment 1","comment2","",""],a.isNullOrEmpty=function(t){return null==t||""===t},a.calcCP=function(){var t=a.name,e=a.attack,o=a.defense,n=a.hp,i=(r.getStat(t),parseInt(a.level)),l={Atk:parseInt(e),Def:parseInt(o),Hp:parseInt(n)};a.cp=r.calculateCP(i,l,{Atk:112,Def:152,Hp:225})}}]).factory("fileReader",["$q","$log",function(n,t){t.log("fileReader");return{readAsText:function(t,e){var o=n.defer();return function(t,e){var o=new FileReader;return o.onload=function(t,e,o){return function(){o.$apply(function(){e.resolve(t.result)})}}(o,t,e),o.onerror=function(t,e,o){return function(){o.$apply(function(){e.reject(t.result)})}}(o,t,e),o.onprogress=function(t,e){return function(t){e.$broadcast("fileProgress",{total:t.total,loaded:t.loaded})}}(0,e),o}(o,e).readAsText(t),o.promise}}}]),angular.module("comedyApp").run(["$templateCache",function(t){t.put("views/about.html",' <section id="about"> <div class="container"> <div class="row"> <div class="col-md-6"> <div class="block"> <ul class="counter-box clearfix"> <li> <div class="block"> <i class="ion-ios-chatboxes-outline"></i> <h4 class="counter"><count-up start="0" step="5" count-to="70" interval="1"></count-up></h4> <span>Life Span</span> </div> </li> <ul class="counter-box clearfix"> <li> <div class="block"> <i class="ion-ios-glasses-outline"></i> <h4 class="counter"><count-up start="0" step="1" count-to="3" interval="1000"></count-up></h4> <span>Root to source</span> </div> </li> <ul class="counter-box clearfix"> <li> <div class="block"> <i class="ion-ios-compose-outline"></i> <h4 class="counter"><count-up count-to="1321" step="1" start="1265" step="10" interval="1"></count-up></h4> <span>Death</span> </div> </li> <ul class="counter-box clearfix"> <li> <div class="block"> <i class="ion-ios-timer-outline"></i> <h4 class="counter"><count-up count-to="1265" step="5" start="1200" interval="1"></count-up></h4> <span>Born</span> </div> </li> </ul> </ul> </ul> </ul> </div> </div> <div class="col-md-6"> <data-owl-carousel class="about-carousel owl-carousel" data-options="{navigation: false, pagination: true, singleItem: true, rewindNav : false}"> <div owl-carousel-item="" ng-repeat="item in ::items2 track by $index" class="owl-item"> <div> <div class="user"> <img src="images/item-img2.1626849d.jpg" alt="People"> <h2>{{item.name}}</h2> </div> <p>{{item.text}}</p> </div> </div> </data-owl-carousel> </div> </div> </div> </section> '),t.put("views/canto.html",'<section id="canto"> <div class="container"> <div class="row"> <div class="col-md-3"> <div class="form-check form-check-inline"> <input class="form-check-input" type="radio" ng-model="opt" value="inferno" ng-change="change()"> <label class="form-check-label">inferno</label> </div> <div class="form-check form-check-inline"> <input class="form-check-input" type="radio" ng-model="opt" value="purgatorio" ng-change="change()"> <label class="form-check-label">purgatorio</label> </div> <div class="form-check form-check-inline"> <input class="form-check-input" type="radio" ng-model="opt" value="paradiso" ng-change="change()"> <label class="form-check-label">paradiso</label> </div> </div> <div class="canto-outline col-md-6"> <div class="" ng-repeat="canto in lines | myCantoFilter: myQuery  track by $index "> <div class="row" ng-if="canto.visible"> <div class="col-1" style="margin:0px 0px 0px 0px;padding:0px 0px; border: 1px solid #f8f9fa;"> <p class="line" style="margin:0px 0px 0px 0px;padding:0px 0px;background-color:#f8f9fa;">{{canto.name}}:{{canto.line}} </p> </div> <div class="col-11" style="padding-left:1px;padding-right:1px"> <p class="canto" ng-bind-html="canto.text"></p> </div> </div> </div> </div> <div class="col-md-3"> <form> <div class="form-group row"> <div class="input-group-addon col-sm-1"><i class="fa fa-search"></i></div> <input type="text" class="form-control col-sm-9 offset-sm-1" placeholder="query: start, end" ng-model="myQuery"> </div> </form> <div class="row"> <button class="btn btn-secondary col-sm-3 offset-sm-1" ng-click="prev()"><i class="ion-ios-arrow-left"></i> </button> <button class="btn btn-secondary col-sm-3 offset-sm-1" ng-click="next()"><i class="ion-ios-arrow-right"></i></button> </div> </div> </div> </div> </section> '),t.put("views/main.html",'<div class="jumbotron jumbotron-fluid"> <div class="container"> <div class="block"> <h1 class="animated fadeInUp">Divine Comedy</h1> <p class="animated fadeInUp">Inferno, Purgatorio, Paradiso</p> <div ng-hide="ie == 0"> <p class="animated fadeInUp">IE {{ie}}</p> </div> </div> </div> </div> <div class="container"> <p> <strong> Summary </strong> </p> <table class="table table-striped"> <tr> <th> </th> <th> Tx</th> <th> Rx</th> <th> Percentage</th> </tr> <tr> <td> symbols </td> <td>{{txTotalSymbols}} </td> <td>{{rxTotalSymbols}} </td> <td>{{rxTotalSymbols /txTotalSymbols * 100 | number : 2}} </td> </tr> <tr><td> sequences </td> <td> {{txTotalLHs}} </td> <td> {{rxTotalLHs}} </td> <td> {{rxTotalLHs/txTotalLHs * 100 | number : 2}} </td> </tr> </table> <div xwindow> <p ng-if="width > 320">The device window is: [{{width}}, {{height}}].</p> </div> </div> '),t.put("views/voyage.html",' <section id="voyage"> <div class="container"> <div class="row"> <div class="col-md-12"> <div class="block"> <div class="voyage-menu"> <ul> <li ng-repeat="item in items2 track by $index " ng-click="setCurrent($index)">{{item.name}}</li> </ul> </div> <div class="voyage-content"> {{items2[current].text}} </div> </div> </div> </div> </div> </section> ')}]);